swagger: '2.0'
info:
  title: AGI Experimental Framework Persistence Service
  description: 'The persistence service is implements by the PostgREST program. See https://github.com/begriffs/postgrest/wiki/Routing'
  version: 1.0.0
host: localhost:8080
schemes:
  - http
basePath: /
produces:
  - application/json
paths:
  /:
    get:
      summary: Retrieves a list of tables and views
      description: "The list of accessible tables and views is returned. \n"
      tags:
        - Meta
      responses:
        '200':
          description: OK
  /nodes:
    get:
      summary: Retrieve Nodes. 
      description: Retrieves the Nodes matching the search criteria. 
      tags:
        - Data
      parameters:
        - name: id
          in: query
          description: id of record
          required: false
          type: integer
        - name: name
          in: query
          description: name of node
          required: false
          type: string
        - name: host
          in: query
          description: name of host
          required: false
          type: string
        - name: port
          in: query
          description: port number
          required: false
          type: integer          
      responses:
        '200':
          description: Successful operation.
          schema:
            type: array
            items:
              $ref: '#/definitions/nodeModel'
        '400':
          description: Bad Operation
    post:
      summary: Creates a new Node entry.
      description: Creates a new Node entry.
      tags:
        - Data
      parameters:
        - in: body
          name: body
          description: The Node to add to DB.
          required: true
          schema:
            $ref: '#/definitions/nodeModel'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Operation
  /entity_types:
    get:
      summary: Retrieves Entity Type. 
      description: Retrieves the Entity Type matching the search criteria. 
      tags:
        - Data
      parameters:
        - name: id
          in: query
          description: id of record
          required: false
          type: integer
        - name: name
          in: query
          description: name of Entity Type
          required: false
          type: string
      responses:
        '200':
          description: Successful operation.
          schema:
            type: array
            items:
              $ref: '#/definitions/entityType'
        '400':
          description: Bad Operation
    post:
      summary: Create new Entity Type.
      description: Creates a new Entity Type.
      tags:
        - Data
      parameters:
        - in: body
          name: body
          description: The Entity Type to add to DB.
          required: true
          schema:
            $ref: '#/definitions/entityType'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Operation       
definitions:
  nodeModel:
    type: object
    properties:
      name:
        type: string
      host:
        type: string
      port:
        type: integer
  entityType:
    type: object
    properties:
      name:
        type: string